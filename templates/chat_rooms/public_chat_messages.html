{% extends 'chat_rooms/public_chat_rooms.html' %}

{% load static %}


{% block right_chat_content %}
    <div class="chat">
        <div class="chat-header clearfix">
            <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/chat_avatar_01_green.jpg"
                 alt="avatar"/>

            <div class="chat-about">
                <div class="chat-with">{{ current_room.name }}</div>
                <div class="chat-num-messages">3 people (2 online)</div>
            </div>
            <i class="fa fa-star"></i>
        </div> <!-- end chat-header -->

        <div class="chat-history">
            <ul>
                {% for message in messages %}
                    {% if message.sender == request.user %}
                        <li class="clearfix">
                            <div class="message-data align-right">
                                <span class="message-data-time">{{ message.timestamp }}</span> &nbsp; &nbsp;
                                <span class="message-data-name">{{ message.sender.username }}</span>  <i
                                    class="fa fa-circle me"></i>
                            </div>
                            <div class="message other-message float-right">
                                {{ message.content }}
                            </div>
                        </li>
                    {% else %}
                        <li>
                            <div class="message-data">
                                <span class="message-data-name"><i
                                        class="fa fa-circle online"></i> {{ message.sender.username }}</span>
                                <span class="message-data-time">{{ message.timestamp }}</span>
                            </div>
                            <div class="message my-message">
                                {{ message.content }}
                            </div>
                        </li>
                    {% endif %}
                {% endfor %}


            </ul>

        </div> <!-- end chat-history -->

        <div class="chat-message clearfix">
            <form action="">

                        <textarea name="chat-message-input" id="message-to-send" placeholder="Type your message"
                                  rows="3"></textarea>

                <i class="fa fa-file-o"></i> &nbsp;&nbsp;&nbsp;
                <i class="fa fa-file-image-o"></i>

                <button id="chat-message-submit" type="submit" class="primary-btn">Send</button>
            </form>
        </div> <!-- end chat-message -->

    </div> <!-- end chat -->
    {{ current_room.name|json_script:"json-roomname" }}
    {{ request.user.username|json_script:'json-username' }}
    <script src="{% static 'js/chat-script.js' %}"></script>
{% endblock %}